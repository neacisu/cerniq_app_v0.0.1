# Cerniq Staging - Dynamic Traefik Configuration
# This file is loaded by neanelu_traefik via file provider

http:
  # ==========================================================================
  # Middlewares
  # ==========================================================================
  middlewares:
    # HSTS Header (Strict Transport Security)
    hsts:
      headers:
        stsSeconds: 63072000
        stsIncludeSubdomains: true
        stsPreload: true
    
    # Security Headers
    security-headers:
      headers:
        frameDeny: true
        browserXssFilter: true
        contentTypeNosniff: true
        referrerPolicy: "strict-origin-when-cross-origin"

  # ==========================================================================
  # Routers
  # ==========================================================================
  routers:
    cerniq-staging:
      rule: "Host(`staging.cerniq.app`)"
      entryPoints:
        - websecure
      service: cerniq-staging-svc
      middlewares:
        - hsts
        - security-headers
      tls:
        certResolver: letsencrypt
      priority: 500

  # ==========================================================================
  # Services
  # ==========================================================================
  services:
    cerniq-staging-svc:
      loadBalancer:
        servers:
          - url: "http://127.0.0.1:64080"
